{"remainingRequest":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/babel-loader/lib/index.js!/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/src/components/Menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/src/components/Menu.vue","mtime":1652585498389},{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/babel.config.js","mtime":1650079706694},{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/cache-loader/dist/cjs.js","mtime":1651720830943},{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/babel-loader/lib/index.js","mtime":1651720831551},{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/cache-loader/dist/cjs.js","mtime":1651720830943},{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/vue-loader/lib/index.js","mtime":1651720831643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9rYWhsaWxiZWFzbGV5L0Rlc2t0b3AvSmF2YXNjcmlwdC9ncmFwaHFsX2Zyb250X2VuZC9ncmFwaHFsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBxdWVyaWVzID0gcmVxdWlyZSgnLi4vLi4vbGlicmFyaWVzL3F1ZXJpZXMnKTsKCnZhciBzdWJzY3JpcHRpb25zID0gcmVxdWlyZSgnLi4vLi4vbGlicmFyaWVzL3N1YnNjcmlwdGlvbnMnKTsKCnZhciBtdXRhdGlvbnMgPSByZXF1aXJlKCcuLi8uLi9saWJyYXJpZXMvbXV0YXRpb25zJyk7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ01lbnUnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXNzYWdlOiAnJywKICAgICAgaGVhZGVyczogW3sKICAgICAgICB0ZXh0OiAnTmFtZScsCiAgICAgICAgdmFsdWU6ICduYW1lJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ0Rlc2NyaXB0aW9uJywKICAgICAgICB2YWx1ZTogJ2Rlc2NyaXB0aW9uJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1F1YW50aXR5JywKICAgICAgICB2YWx1ZTogJ3F1YW50aXR5JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1NpZGVzJywKICAgICAgICB2YWx1ZTogJ3NpZGVzJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ0FjdGlvbnMnLAogICAgICAgIHZhbHVlOiAnYWN0aW9ucycsCiAgICAgICAgc29ydGFibGU6IGZhbHNlCiAgICAgIH1dLAogICAgICBmb29kTGlzdDogW10sCiAgICAgIGxvYWRpbmc6IG51bGwsCiAgICAgIGZhaWxNc2c6ICcnLAogICAgICBzdWNjZXNzTXNnOiAnJywKICAgICAgc3VjY2Vzc1NuYWNrYmFyOiBmYWxzZSwKICAgICAgZmFpbFNuYWNrYmFyOiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7Ly8gLS0tIE9QVElPTiAxIC0tLSAKICAgIC8vIHJlbW92ZSBpdGVtIG9uY2UgdGhlcmUgaXMgbm8gbW9yZSBxdWFudGl0eQogICAgLy8gZm9vZExpc3QoYXJyKXsKICAgIC8vICAgZm9yKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKyl7CiAgICAvLyAgICAgaWYoYXJyW2ldLnF1YW50aXR5ID09PSAwKXsKICAgIC8vICAgICAgIHRoaXMuZm9vZExpc3Quc3BsaWNlKGksMSkKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGJ1eTogZnVuY3Rpb24gYnV5KGlkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICAgICAgICAgICAgLy8gUXVlcnkKICAgICAgICAgICAgICAgICAgbXV0YXRpb246IG11dGF0aW9ucy5idXlGb29kLAogICAgICAgICAgICAgICAgICAvLyB2YXJpYWJsZXMKICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmKGlkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG5vdGlmOiBmdW5jdGlvbiBub3RpZihpZCkgewogICAgICAvLyAtLS0gT1BUSU9OIDIgLS0tIAogICAgICAvLyB3aGVuIGJ1eSBidXR0b24gY2xpY2tlZCBhbmQgaXRlbSBoYXMgbm8gbW9yZSBxdWFudGl0eSBkaXNwbGF5IHRvYXN0IG1lc3NhZ2UKICAgICAgdmFyIHNlbGVjdGVkSXRlbSA9IHRoaXMuZm9vZExpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlkID09PSBpZDsKICAgICAgfSk7CgogICAgICBpZiAoc2VsZWN0ZWRJdGVtLnF1YW50aXR5ID4gMCkgewogICAgICAgIHRoaXMuc3VjY2Vzc01zZyA9ICJUaGFua3MgZm9yIHB1cmNoYXNpbmcgIi5jb25jYXQoc2VsZWN0ZWRJdGVtLm5hbWUsICIhIik7CiAgICAgICAgdGhpcy5mYWlsU25hY2tiYXIgPSBmYWxzZTsKICAgICAgICB0aGlzLnN1Y2Nlc3NTbmFja2JhciA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mYWlsTXNnID0gIlNvcnJ5ISAiLmNvbmNhdChzZWxlY3RlZEl0ZW0ubmFtZSwgIiBpcyBzb2xkIG91dCEiKTsKICAgICAgICB0aGlzLnN1Y2Nlc3NTbmFja2JhciA9IGZhbHNlOwogICAgICAgIHRoaXMuZmFpbFNuYWNrYmFyID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0sCiAgYXBvbGxvOiB7CiAgICBmb29kOiB7CiAgICAgIHF1ZXJ5OiBxdWVyaWVzLmdldEFsbEZvb2QsCiAgICAgIC8vIG1hbnVhbDogZmFsc2UsCiAgICAgIHJlc3VsdDogZnVuY3Rpb24gcmVzdWx0KF9yZWYpIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YSwKICAgICAgICAgICAgbG9hZGluZyA9IF9yZWYubG9hZGluZzsKICAgICAgICAvLyBjb25zb2xlLmxvZyhgQVBPTExPIEZPT0QgUVVFUlkke0pTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDEpfSwgJHtsb2FkaW5nfSwgJHtuZXR3b3JrU3RhdHVzfWApOwogICAgICAgIHRoaXMubG9hZGluZyA9IGxvYWRpbmc7CiAgICAgICAgdGhpcy5mb29kTGlzdCA9IGRhdGEuZm9vZDsKICAgICAgfSwKICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgc3Vic2NyaWJlVG9Nb3JlOiB7CiAgICAgICAgZG9jdW1lbnQ6IHN1YnNjcmlwdGlvbnMuZm9vZFB1cmNoYXNlZCwKICAgICAgICB1cGRhdGVRdWVyeTogZnVuY3Rpb24gdXBkYXRlUXVlcnkocHJldmlvdXNEYXRhLCBfcmVmMikgewogICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbkRhdGEgPSBfcmVmMi5zdWJzY3JpcHRpb25EYXRhOwogICAgICAgICAgLy8gKioqIE5PVElDRSA6IFVuYWJsZSB0byByZWFjaCB2YXJpYWJsZXMgaW4gZGF0YSgpIGZvciBzb21lIHJlYXNvbiAqKioKICAgICAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGl0ZW0gdG8gdXBkYXRlCiAgICAgICAgICB2YXIgaW5kZXhPZkl0ZW1Ub1VwZGF0ZSA9IHByZXZpb3VzRGF0YS5mb29kLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gc3Vic2NyaXB0aW9uRGF0YS5kYXRhLmZvb2RQdXJjaGFzZWQuaWQ7CiAgICAgICAgICB9KTsgLy8gVXNlIHRoZSBpbmRleCB0byBtb2RpZnkgdGhlIGl0ZW0gZGlyZWN0bHkgYW5kIHVwZGF0ZSB0aGUgcXVhbnRpdHkKCiAgICAgICAgICBwcmV2aW91c0RhdGEuZm9vZFtpbmRleE9mSXRlbVRvVXBkYXRlXS5xdWFudGl0eSA9IHN1YnNjcmlwdGlvbkRhdGEuZGF0YS5mb29kUHVyY2hhc2VkLnF1YW50aXR5OyAvLyByZXR1cm4geyBmb29kOiBbLi4ucHJldmlvdXNEYXRhLCAuLi5zdWJzY3JpcHRpb25EYXRhLmRhdGEuZm9vZFB1cmNoYXNlZF0gfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;;AACA;;AACA;;AAEA;EACAA,YADA;EAEAC;IAAA;MACAC,WADA;MAEAC,UACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA;QAAAD;QAAAC;MAAA,CAHA,EAIA;QAAAD;QAAAC;MAAA,CAJA,EAKA;QAAAD;QAAAC;QAAAC;MAAA,CALA,CAFA;MASAC,YATA;MAUAC,aAVA;MAWAC,WAXA;MAYAC,cAZA;MAaAC,sBAbA;MAcAC;IAdA;EAAA,CAFA;EAmBAC,QACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EATA,CAnBA;EA8BAC;IACAC,GADA,eACAC,EADA,EACA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;kBACA;kBACAC,2BAFA;kBAGA;kBACAC;oBACAF;kBADA;gBAJA;;gBAQA;;cATA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAUA,CAXA;IAYAG,KAZA,iBAYAH,EAZA,EAYA;MACA;MACA;MACA;QAAA;MAAA;;MACA;QACA;QACA;QACA;MACA,CAJA,MAIA;QACA;QACA;QACA;MACA;IACA;EAzBA,CA9BA;EAyDAI;IACAC;MACAC,yBADA;MAEA;MACAC,MAHA,wBAGA;QAAA;QAAA;QACA;QACA;QACA;MACA,CAPA;MAQA;MACAC;QACAC,qCADA;QAEAC;UAAA;UACA;UACA;UACA;YAAA;UAAA,GAHA,CAIA;;UACAC,+FALA,CAMA;QACA;MATA;IATA;EADA;AAzDA","names":["name","data","message","headers","text","value","sortable","foodList","loading","failMsg","successMsg","successSnackbar","failSnackbar","watch","methods","buy","id","mutation","variables","notif","apollo","food","query","result","subscribeToMore","document","updateQuery","previousData"],"sourceRoot":"src/components","sources":["Menu.vue"],"sourcesContent":["<template>\n  <v-container>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"foodList\"\n      class=\"elevation-1\"\n      :loading=\"loading\"\n    >\n    <!-- QUANTITY -->\n    <template v-slot:[`item.quantity`]=\"{ item }\">\n      <div>\n        <td v-if=\"item.quantity > 0\">{{ item.quantity }}</td>\n        <td v-else>SOLD OUT</td>\n      </div>\n    </template>\n\n    <!-- SIDES -->\n    <template v-slot:[`item.sides`]=\"{ item }\">\n      <div v-for=\"(side, index) in item.sides\" :key=\"index\">\n        <td>{{ side.name }}</td>\n      </div>\n    </template>\n\n    <!-- ACTIONS -->\n    <template v-slot:[`item.actions`]=\"{ item }\">\n      <v-btn  rounded color=\"secondary\" @click=\"buy(item.id)\">Buy</v-btn>\n\n    </template>\n    </v-data-table>\n\n    <!-- SNACKBAR purchased -->\n    <v-snackbar\n      v-model=\"successSnackbar\"\n      :timeout=\"3000\"\n      absolute\n      shaped\n      top\n      color=\"success\"\n    >\n      {{ successMsg }}\n    </v-snackbar>\n\n    <!-- SNACKBAR no quantity -->\n    <v-snackbar\n      v-model=\"failSnackbar\"\n      :timeout=\"3000\"\n      absolute\n      shaped\n      top\n      color=\"red accent-2\"\n    >\n      {{ failMsg }}\n    </v-snackbar>\n\n\n  </v-container>\n</template>\n\n<script>\n\nconst queries = require('../../libraries/queries')\nconst subscriptions = require('../../libraries/subscriptions')\nconst mutations = require('../../libraries/mutations')\n\n  export default {\n    name: 'Menu',\n    data: () => ({\n      message: '',\n      headers: [\n        { text: 'Name', value: 'name' },\n        { text: 'Description', value: 'description' },\n        { text: 'Quantity', value: 'quantity' },\n        { text: 'Sides', value: 'sides'},\n        { text: 'Actions', value: 'actions', sortable: false}\n      ],\n      foodList: [],\n      loading: null,\n      failMsg: '',\n      successMsg: '',\n      successSnackbar: false,\n      failSnackbar: false\n\n    }),\n    watch: {\n      // --- OPTION 1 --- \n      // remove item once there is no more quantity\n      // foodList(arr){\n      //   for(let i = 0; i < arr.length; i++){\n      //     if(arr[i].quantity === 0){\n      //       this.foodList.splice(i,1)\n      //     }\n      //   }\n      // }\n    },\n    methods: {\n      async buy(id){\n          this.$apollo.mutate({\n            // Query\n            mutation: mutations.buyFood,\n            // variables\n            variables: {\n              id: id,\n            }\n      })\n      this.notif(id)\n    },\n    notif(id){\n      // --- OPTION 2 --- \n      // when buy button clicked and item has no more quantity display toast message\n      const selectedItem = this.foodList.find(item => item.id === id)\n      if(selectedItem.quantity > 0){\n        this.successMsg = `Thanks for purchasing ${selectedItem.name}!`\n        this.failSnackbar = false\n        this.successSnackbar = true\n      } else {\n        this.failMsg = `Sorry! ${selectedItem.name} is sold out!`\n        this.successSnackbar = false\n        this.failSnackbar = true\n      }\n    },\n    },\n    apollo: {\n      food: {\n        query: queries.getAllFood,\n        // manual: false,\n        result ({data, loading}) {\n          // console.log(`APOLLO FOOD QUERY${JSON.stringify(data, null, 1)}, ${loading}, ${networkStatus}`);\n          this.loading = loading\n          this.foodList = data.food;\n        },\n        // -----------------\n        subscribeToMore: {\n          document: subscriptions.foodPurchased,\n          updateQuery: (previousData, {subscriptionData}) => {\n            // *** NOTICE : Unable to reach variables in data() for some reason ***\n            // Get the index of the item to update\n            const indexOfItemToUpdate = previousData.food.findIndex(item => item.id === subscriptionData.data.foodPurchased.id)\n            // Use the index to modify the item directly and update the quantity\n            previousData.food[indexOfItemToUpdate].quantity = subscriptionData.data.foodPurchased.quantity;\n            // return { food: [...previousData, ...subscriptionData.data.foodPurchased] }\n          }\n        }\n      }\n    },\n  }\n</script>\n"]}]}