{"remainingRequest":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/src/components/Menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/src/components/Menu.vue","mtime":1652585498389},{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/cache-loader/dist/cjs.js","mtime":1651720830943},{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/babel-loader/lib/index.js","mtime":1651720831551},{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/cache-loader/dist/cjs.js","mtime":1651720830943},{"path":"/Users/kahlilbeasley/Desktop/Javascript/graphql_front_end/graphql/node_modules/vue-loader/lib/index.js","mtime":1651720831643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpjb25zdCBxdWVyaWVzID0gcmVxdWlyZSgnLi4vLi4vbGlicmFyaWVzL3F1ZXJpZXMnKQpjb25zdCBzdWJzY3JpcHRpb25zID0gcmVxdWlyZSgnLi4vLi4vbGlicmFyaWVzL3N1YnNjcmlwdGlvbnMnKQpjb25zdCBtdXRhdGlvbnMgPSByZXF1aXJlKCcuLi8uLi9saWJyYXJpZXMvbXV0YXRpb25zJykKCiAgZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ01lbnUnLAogICAgZGF0YTogKCkgPT4gKHsKICAgICAgbWVzc2FnZTogJycsCiAgICAgIGhlYWRlcnM6IFsKICAgICAgICB7IHRleHQ6ICdOYW1lJywgdmFsdWU6ICduYW1lJyB9LAogICAgICAgIHsgdGV4dDogJ0Rlc2NyaXB0aW9uJywgdmFsdWU6ICdkZXNjcmlwdGlvbicgfSwKICAgICAgICB7IHRleHQ6ICdRdWFudGl0eScsIHZhbHVlOiAncXVhbnRpdHknIH0sCiAgICAgICAgeyB0ZXh0OiAnU2lkZXMnLCB2YWx1ZTogJ3NpZGVzJ30sCiAgICAgICAgeyB0ZXh0OiAnQWN0aW9ucycsIHZhbHVlOiAnYWN0aW9ucycsIHNvcnRhYmxlOiBmYWxzZX0KICAgICAgXSwKICAgICAgZm9vZExpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBudWxsLAogICAgICBmYWlsTXNnOiAnJywKICAgICAgc3VjY2Vzc01zZzogJycsCiAgICAgIHN1Y2Nlc3NTbmFja2JhcjogZmFsc2UsCiAgICAgIGZhaWxTbmFja2JhcjogZmFsc2UKCiAgICB9KSwKICAgIHdhdGNoOiB7CiAgICAgIC8vIC0tLSBPUFRJT04gMSAtLS0gCiAgICAgIC8vIHJlbW92ZSBpdGVtIG9uY2UgdGhlcmUgaXMgbm8gbW9yZSBxdWFudGl0eQogICAgICAvLyBmb29kTGlzdChhcnIpewogICAgICAvLyAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspewogICAgICAvLyAgICAgaWYoYXJyW2ldLnF1YW50aXR5ID09PSAwKXsKICAgICAgLy8gICAgICAgdGhpcy5mb29kTGlzdC5zcGxpY2UoaSwxKQogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0KICAgICAgLy8gfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgYXN5bmMgYnV5KGlkKXsKICAgICAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgICAgICAvLyBRdWVyeQogICAgICAgICAgICBtdXRhdGlvbjogbXV0YXRpb25zLmJ1eUZvb2QsCiAgICAgICAgICAgIC8vIHZhcmlhYmxlcwogICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgIH0KICAgICAgfSkKICAgICAgdGhpcy5ub3RpZihpZCkKICAgIH0sCiAgICBub3RpZihpZCl7CiAgICAgIC8vIC0tLSBPUFRJT04gMiAtLS0gCiAgICAgIC8vIHdoZW4gYnV5IGJ1dHRvbiBjbGlja2VkIGFuZCBpdGVtIGhhcyBubyBtb3JlIHF1YW50aXR5IGRpc3BsYXkgdG9hc3QgbWVzc2FnZQogICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB0aGlzLmZvb2RMaXN0LmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBpZCkKICAgICAgaWYoc2VsZWN0ZWRJdGVtLnF1YW50aXR5ID4gMCl7CiAgICAgICAgdGhpcy5zdWNjZXNzTXNnID0gYFRoYW5rcyBmb3IgcHVyY2hhc2luZyAke3NlbGVjdGVkSXRlbS5uYW1lfSFgCiAgICAgICAgdGhpcy5mYWlsU25hY2tiYXIgPSBmYWxzZQogICAgICAgIHRoaXMuc3VjY2Vzc1NuYWNrYmFyID0gdHJ1ZQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmFpbE1zZyA9IGBTb3JyeSEgJHtzZWxlY3RlZEl0ZW0ubmFtZX0gaXMgc29sZCBvdXQhYAogICAgICAgIHRoaXMuc3VjY2Vzc1NuYWNrYmFyID0gZmFsc2UKICAgICAgICB0aGlzLmZhaWxTbmFja2JhciA9IHRydWUKICAgICAgfQogICAgfSwKICAgIH0sCiAgICBhcG9sbG86IHsKICAgICAgZm9vZDogewogICAgICAgIHF1ZXJ5OiBxdWVyaWVzLmdldEFsbEZvb2QsCiAgICAgICAgLy8gbWFudWFsOiBmYWxzZSwKICAgICAgICByZXN1bHQgKHtkYXRhLCBsb2FkaW5nfSkgewogICAgICAgICAgLy8gY29uc29sZS5sb2coYEFQT0xMTyBGT09EIFFVRVJZJHtKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAxKX0sICR7bG9hZGluZ30sICR7bmV0d29ya1N0YXR1c31gKTsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGxvYWRpbmcKICAgICAgICAgIHRoaXMuZm9vZExpc3QgPSBkYXRhLmZvb2Q7CiAgICAgICAgfSwKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIHN1YnNjcmliZVRvTW9yZTogewogICAgICAgICAgZG9jdW1lbnQ6IHN1YnNjcmlwdGlvbnMuZm9vZFB1cmNoYXNlZCwKICAgICAgICAgIHVwZGF0ZVF1ZXJ5OiAocHJldmlvdXNEYXRhLCB7c3Vic2NyaXB0aW9uRGF0YX0pID0+IHsKICAgICAgICAgICAgLy8gKioqIE5PVElDRSA6IFVuYWJsZSB0byByZWFjaCB2YXJpYWJsZXMgaW4gZGF0YSgpIGZvciBzb21lIHJlYXNvbiAqKioKICAgICAgICAgICAgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgaXRlbSB0byB1cGRhdGUKICAgICAgICAgICAgY29uc3QgaW5kZXhPZkl0ZW1Ub1VwZGF0ZSA9IHByZXZpb3VzRGF0YS5mb29kLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IHN1YnNjcmlwdGlvbkRhdGEuZGF0YS5mb29kUHVyY2hhc2VkLmlkKQogICAgICAgICAgICAvLyBVc2UgdGhlIGluZGV4IHRvIG1vZGlmeSB0aGUgaXRlbSBkaXJlY3RseSBhbmQgdXBkYXRlIHRoZSBxdWFudGl0eQogICAgICAgICAgICBwcmV2aW91c0RhdGEuZm9vZFtpbmRleE9mSXRlbVRvVXBkYXRlXS5xdWFudGl0eSA9IHN1YnNjcmlwdGlvbkRhdGEuZGF0YS5mb29kUHVyY2hhc2VkLnF1YW50aXR5OwogICAgICAgICAgICAvLyByZXR1cm4geyBmb29kOiBbLi4ucHJldmlvdXNEYXRhLCAuLi5zdWJzY3JpcHRpb25EYXRhLmRhdGEuZm9vZFB1cmNoYXNlZF0gfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9Cg=="},{"version":3,"sources":["Menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Menu.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"foodList\"\n      class=\"elevation-1\"\n      :loading=\"loading\"\n    >\n    <!-- QUANTITY -->\n    <template v-slot:[`item.quantity`]=\"{ item }\">\n      <div>\n        <td v-if=\"item.quantity > 0\">{{ item.quantity }}</td>\n        <td v-else>SOLD OUT</td>\n      </div>\n    </template>\n\n    <!-- SIDES -->\n    <template v-slot:[`item.sides`]=\"{ item }\">\n      <div v-for=\"(side, index) in item.sides\" :key=\"index\">\n        <td>{{ side.name }}</td>\n      </div>\n    </template>\n\n    <!-- ACTIONS -->\n    <template v-slot:[`item.actions`]=\"{ item }\">\n      <v-btn  rounded color=\"secondary\" @click=\"buy(item.id)\">Buy</v-btn>\n\n    </template>\n    </v-data-table>\n\n    <!-- SNACKBAR purchased -->\n    <v-snackbar\n      v-model=\"successSnackbar\"\n      :timeout=\"3000\"\n      absolute\n      shaped\n      top\n      color=\"success\"\n    >\n      {{ successMsg }}\n    </v-snackbar>\n\n    <!-- SNACKBAR no quantity -->\n    <v-snackbar\n      v-model=\"failSnackbar\"\n      :timeout=\"3000\"\n      absolute\n      shaped\n      top\n      color=\"red accent-2\"\n    >\n      {{ failMsg }}\n    </v-snackbar>\n\n\n  </v-container>\n</template>\n\n<script>\n\nconst queries = require('../../libraries/queries')\nconst subscriptions = require('../../libraries/subscriptions')\nconst mutations = require('../../libraries/mutations')\n\n  export default {\n    name: 'Menu',\n    data: () => ({\n      message: '',\n      headers: [\n        { text: 'Name', value: 'name' },\n        { text: 'Description', value: 'description' },\n        { text: 'Quantity', value: 'quantity' },\n        { text: 'Sides', value: 'sides'},\n        { text: 'Actions', value: 'actions', sortable: false}\n      ],\n      foodList: [],\n      loading: null,\n      failMsg: '',\n      successMsg: '',\n      successSnackbar: false,\n      failSnackbar: false\n\n    }),\n    watch: {\n      // --- OPTION 1 --- \n      // remove item once there is no more quantity\n      // foodList(arr){\n      //   for(let i = 0; i < arr.length; i++){\n      //     if(arr[i].quantity === 0){\n      //       this.foodList.splice(i,1)\n      //     }\n      //   }\n      // }\n    },\n    methods: {\n      async buy(id){\n          this.$apollo.mutate({\n            // Query\n            mutation: mutations.buyFood,\n            // variables\n            variables: {\n              id: id,\n            }\n      })\n      this.notif(id)\n    },\n    notif(id){\n      // --- OPTION 2 --- \n      // when buy button clicked and item has no more quantity display toast message\n      const selectedItem = this.foodList.find(item => item.id === id)\n      if(selectedItem.quantity > 0){\n        this.successMsg = `Thanks for purchasing ${selectedItem.name}!`\n        this.failSnackbar = false\n        this.successSnackbar = true\n      } else {\n        this.failMsg = `Sorry! ${selectedItem.name} is sold out!`\n        this.successSnackbar = false\n        this.failSnackbar = true\n      }\n    },\n    },\n    apollo: {\n      food: {\n        query: queries.getAllFood,\n        // manual: false,\n        result ({data, loading}) {\n          // console.log(`APOLLO FOOD QUERY${JSON.stringify(data, null, 1)}, ${loading}, ${networkStatus}`);\n          this.loading = loading\n          this.foodList = data.food;\n        },\n        // -----------------\n        subscribeToMore: {\n          document: subscriptions.foodPurchased,\n          updateQuery: (previousData, {subscriptionData}) => {\n            // *** NOTICE : Unable to reach variables in data() for some reason ***\n            // Get the index of the item to update\n            const indexOfItemToUpdate = previousData.food.findIndex(item => item.id === subscriptionData.data.foodPurchased.id)\n            // Use the index to modify the item directly and update the quantity\n            previousData.food[indexOfItemToUpdate].quantity = subscriptionData.data.foodPurchased.quantity;\n            // return { food: [...previousData, ...subscriptionData.data.foodPurchased] }\n          }\n        }\n      }\n    },\n  }\n</script>\n"]}]}